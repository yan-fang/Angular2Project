<div data-ng-controller="AddExternalAccountCtrl as addExtPayAcct">
<div ease-modal toggle-close="addExtPayAcct.close()" delete-modal="addExtPayAcct.deleteModal"
       modal-class="addExtPayAcct.modalClass" modal-type="addExtPayAcct.modalType" focus-id="focusId">

    <h2 tabindex="0">
      {{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.header.label']}}
    </h2>

    <form id="extPay" name="extPay" novalidate>
      <div tabindex="0" aria-label= "{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.checkimg.alttext']}}"  class="{{addExtPayAcct.checkImage}}"></div>
      <div data-ng-show="addExtPayAcct.errorText" class="form-container error">
        <p id="errorText">{{addExtPayAcct.errorText}}</p>
      </div>
      <div class="form-container">
        <label id="lblabaNumber">{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.rtnum.label']}}
          <div class="cleardiv"></div>
          <div>
          <input name="abaNumber" id="abaNumber"
                 number-only highlight-textbox get-bank-details
                 class="animated routingNum"
                 tabindex="0"
                 data-ng-model-options="{ updateOn: 'blur' }"
                 data-ng-minlength="9"
                 maxlength="9"
                 type="text"
                 placeholder="{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.rtnum.ghost.label']}}"
                 ng-class="{'inputError' : extPay.abaNumber.$invalid && !extPay.abaNumber.$pristine}"
                 data-ng-model="addExtPayAcct.accountFields.abaNumber"
                 ng-pattern="/^[0-9]+$/" required>
          <input class="bankName" name="bankName" id="bankName"
                 data-ng-class="{'inputError' : extPay.abaNumber.$invalid && !extPay.abaNumber.$pristine}"
                  highlight-textbox aria-live="polite" aria-atomic="true"
                 data-ng-model="bankName"
                readonly="true" value="{{bankName}}" required onclick="$('#abaNumber').focus();">
          </div>
          </input>
        </label>
        <div>
          <p data-ng-show="extPay.abaNumber.$invalid && !extPay.abaNumber.$pristine" class="error-message" tabindex="0">
            {{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.rtnum.errormsg']}}</p>
        </div>
      </div>

      <div class="form-container">
        <label id="lblaccountNumber">{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.acctnum.label']}}
          <input id="accountNumber_TLNPI" name="accountNumber_TLNPI"
                 number-only
                 class="animated"
                 tabindex="0"
                 data-ng-model-options="{ updateOn: 'blur', allowInvalid: true}"
                 data-ng-minlength="3"
                 maxlength="17"
                 type="text"
                 placeholder="{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.acctnum.ghost.label']}}"
                 data-ng-model="addExtPayAcct.accountFields.accountNumber"
                 data-ng-class="{'inputError' : extPay.accountNumber_TLNPI.$invalid && !extPay.accountNumber_TLNPI.$pristine}"
                 required>
        </label>
        <div>
          <p data-ng-show="extPay.accountNumber_TLNPI.$invalid && !extPay.accountNumber_TLNPI.$pristine" class="error-message" tabindex="0">
            {{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.acctnum.errormsg']}}</p>
        </div>
      </div>

      <div class="form-container">
        <label id="lblreAccountNumber">{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.acctnum2.label']}}
          <input id="repAccountNumber_TLNPI"
                 name="repAccountNumber_TLNPI"
                 type="text"
                 no-paste
                 class="animated"
                 placeholder="{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.acctnum.ghost.label']}}"
                 data-ng-model-options="{ updateOn: 'blur' }"
                 data-ng-model="addExtPayAcct.accountFields.reAccountNumber"
                 maxlength="17"
                 addacct-compare-to="addExtPayAcct.accountFields.accountNumber"
                 number-only
                 required
                 data-ng-class="{'inputError' : extPay.repAccountNumber_TLNPI.$invalid && !extPay.repAccountNumber_TLNPI.$pristine}"
                 tabindex="0"/>
        </label>
        <div>
          <p data-ng-show="extPay.repAccountNumber_TLNPI.$invalid && !extPay.repAccountNumber_TLNPI.$pristine" class="error-message" tabindex="0">
            {{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.acctnum2.errormsg']}}</p>
        </div>
      </div>

      <div class="form-container">
        <label id="lblaccountType">{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.accttype.label']}}
          <div dropdown id="accountType"
               placeholder="Select Account Type"
               datasource-function="addExtPayAcct.populateAccountTypeValues(addExtPayAcct.contentDataAddExtAcct)"
               display-field="display"
               data-ng-model="addExtPayAcct.accountFields.accountType"
               required></div>
        </label>
      </div>

      <div data-ng-if= "addExtPayAcct.showDefaultPrimary()">
        <input id="setPrimaryAct" type="checkbox" data-ng-model="addExtPayAcct.accountFields.primaryAct" aria-label="{{::addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.primary.pmtact.label']}}">
        <label id="lblSetPrimaryAct">{{::addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.primary.pmtact.label']}}</label>
        <span class="addAccount-tooltip-container">
             <ease-tooltip tip-message="addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.primary.tooltipinfo.label']"
             options="addExtPayAcct.tooltipOptions">
            </ease-tooltip>
        </span>
      </div>

      <button type="submit" tabindex="0"
              id="btnMakePayment"
              data-ng-disabled="extPay.$invalid || addExtPayAcct.isButtonClicked"
              data-ng-click="addExtPayAcct.addPayment(extPay)"
              class="button btnTransfer"  click-button-once>
        <span data-ng-class="addExtPayAcct.loadingClass"></span>
        <span>{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.submit.label']}}</span>
      </button>
    </form>
    <p tabindex="0" class="ccDisclaimer" aria-label="{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.description.label']}}">{{addExtPayAcct.contentDataAddExtAcct['ease.core.addacct.description.label']}}</p>
  </div>
</div>
