<div tabindex="{{(transaction.enhancedTransaction && !transaction.showYear)? 0 : ''}}"
     ng-class="{'childOpen':accordionVM.isOpen($index)}"
     data-ng-repeat="transaction in accordionVM.accordionElements"
     aria-expanded="{{accordionVM.isOpen($index)}}"
     title="{{(transaction.enhancedTransaction && !transaction.showYear)? 'Click to open the enhanced transaction details' : ''}}"
     role = "{{(transaction.enhancedTransaction && !transaction.showYear)? 'button' : ''}}"
     ng-click="accordionVM.setOpenIndex($index); "
     class="home-enhanced-transaction">

  <div class="statements-view"  data-ng-if="transaction.showYear">
    <span class="year" id="{{'year'+ $index}}" aria-label="{{transaction.year}} Transactions">
      {{transaction.year}} {{accordionVM.accordionParent.i18nHL.transactions.transactions}}</span>
  </div>

  <p data-ng-if="transaction.transactionType != 'Posted' && !transaction.showYear">
        <span class="transactions-date" id="{{'transactionDatePosted'+ $index}}" >
          <span id="{{'transactionTypePosted'+ $index}}" class="transactionType">{{transaction.transactionType}}</span>
        </span>
        <span class="transactions-name" >
          <span class="transactions-descriptionScheduled" id="{{'transactionDescriptionPosted'+ $index}}">{{transaction.transactionCustomDescription}}</span>
          <span class="hl-transactions-amntdesc" data-ng-if="transaction.transactionAmount == null && transaction.recurringPaymentDraft">{{transaction.transactionAmountDescription}}</span>
          <span class="hl-transactions-amount" data-ng-if="transaction.transactionAmount == null && !transaction.recurringPaymentDraft" aria-hidden="true">---</span>
          <span class="hl-transactions-amount" id="{{'transactionAmountPosted'+ $index}}"
                data-ng-if="transaction.transactionAmount != null">{{transaction.transactionAmount | currency}}
          </span>
        </span>
        <span class="transactions-amount-details" data-ng-if="transaction.transactionType == 'Posted'">
          <span id="{{'principalPaidPosted'+ $index}}"  class="hl-principal-paid"
                data-ng-if="transaction.principalPaid != null">{{transaction.principalPaid | currency}}</span>
          <span class="hl-principal-paid" data-ng-if="transaction.principalPaid == null" aria-hidden="true">---</span>

          <span id="{{'principalBalancePosted'+ $index}}" class="hl-principal-balance"
                data-ng-if="transaction.principalBalance != null">{{transaction.principalBalance | currency}}</span>
          <span class="hl-principal-balance" data-ng-if="transaction.principalBalance == null" aria-hidden="true">---</span>
        </span>
  </p>

  <p data-ng-if="transaction.transactionType == 'Posted' && !transaction.showYear">

        <span class="transactions-date" id="{{'transactionDate'+ $index}}" >
          <span id="{{'transactionMonth'+ $index}}" data-ng-if="transaction.transactionType != 'Pending'">{{transaction.transactionPostedDate | date:'MMM'}}</span>
          <span id="{{'transactionDay'+ $index}}" class="day" data-ng-if="transaction.transactionType != 'Pending'">{{transaction.transactionPostedDate | date:'dd'}}</span>
          <span id="{{'transactionType'+ $index}}" data-ng-if="transaction.transactionType != 'Posted'"
                class="transactionTypePosted">{{transaction.transactionType}}</span>
        </span>
        <span class="transactions-name" >
          <span class="transactions-descriptionPosted" id="{{'transactionDescription'+ $index}}">{{transaction.transactionCustomDescription}}</span>
          <span class="hl-transactions-amountPosted" data-ng-if="transaction.transactionAmount == null" aria-hidden="true">---</span>
          <span class="hl-transactions-amountPosted" id="{{'transactionAmount'+ $index}}"
                data-ng-if="transaction.transactionAmount != null">{{transaction.transactionAmount | currency}}
          </span>
        </span>
        <span class="transactions-amount-details" data-ng-if="transaction.transactionType == 'Posted'">
          <span id="{{'principalPaid'+ $index}}"  class="hl-principal-paid"
                data-ng-if="transaction.principalPaid != null">{{transaction.principalPaid | currency}}</span>
          <span class="hl-principal-paid" data-ng-if="transaction.principalPaid == null" aria-hidden="true">---</span>

          <span id="{{'principalBalance'+ $index}}" class="hl-principal-balance"
                data-ng-if="transaction.principalBalance != null">{{transaction.principalBalance | currency}}</span>
          <span class="hl-principal-balance" data-ng-if="transaction.principalBalance == null" aria-hidden="true">---</span>
        </span>
  </p>

  <div data-ng-if="transaction.enhancedTransaction && !transaction.showYear">
    <ng-include data-ng-if="transaction.transactionCode == 493 && transaction.transactionType == 'Posted'"
                src="'ease-ui/bower_components/HomeLoans/ver1490643033478/partials/enhancedTransactions/HomeLoans-TransactionsDrawer-PostedType2.html'"></ng-include>
    <ng-include data-ng-if="transaction.transactionCode != 493 && transaction.transactionType == 'Posted'"
                src="'ease-ui/bower_components/HomeLoans/ver1490643033478/partials/enhancedTransactions/HomeLoans-TransactionsDrawer-PostedType1.html'"></ng-include>
    <ng-include data-ng-if="transaction.transactionType == 'Scheduled'"
                src="'ease-ui/bower_components/HomeLoans/ver1490643033478/partials/enhancedTransactions/HomeLoans-TransactionsDrawer-Scheduled.html'"></ng-include>
  </div>
</div>
