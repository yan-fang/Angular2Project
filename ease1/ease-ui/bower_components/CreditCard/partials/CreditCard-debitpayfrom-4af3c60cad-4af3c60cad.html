<div class="cc-edit-container debit">
    <div class="cc-edit-container-content" id="debitShortDisplayName">
        {{ccPay.paymentDetails.payFromAccount.shortDisplayName}}
    </div>
    <div id="debit-cc-edit-pay-from-account-link" class="step2EditLink" ng-class="{'disabled':ccPay.loading}"
         ng-click="ccPay.showStep('step2a'); ccPay.psClick('link', 'editPayFrom');" tabindex="0"
         aria-label="{{'ease.card.payment.makeapayment.step2.payfrom.edit.aria.label.text' | translate}} {{ccPay.paymentDetails.payFromAccount.shortDisplayName}}" translate>ease.card.payment.makeapayment.step2.edit.text</div>
    <form name="ccPay.debitCardFields" class="debitCardFields" id="debit-card-verification">
        <div id="inputFormId" class="form-container">
              <span id="expDateInput">
 <span id="hideScreenReaderLabelExpDate"  class="hideScreenReaderLabel">Use keyboard to input Expiration date in MM/YY format"</span>
                <label for="expDate">{{::'ease.card.payment.makeapayment.step2.debitCard.expDate.label' | translate}}

                    <input id="expDate"
                           tabindex="0"
                           type="text"
                           debitcard-cvv="5"
                           maxlength="5"
                           required="required"
                           name="expDate"
                           debitexpiration-date
                           aria-describedby="hideScreenReaderLabelExpDate"
                           class="expirationdateValidation"
                           ng-model="ccPay.paymentDetails.expDate"
                           ng-focus="ccPay.editingExpDate = true; ccPay.hasDebitError = false;"
                           ng-blur="ccPay.editingExpDate = false"
                           ng-class="{'hasError' : ccPay.expDateErrorMsg === true}"
                           placeholder="{{::'ease.card.payment.makeapayment.step2.debitCard.expDate.placeholder.text' | translate}}">
                </label>
              </span>

              <span id="cvvInput">
                 <span id="hideScreenReaderLabelCvv"  class="hideScreenReaderLabel">Use keyboard to enter the 3 digit security code on the back of your debit card</span>
                <label for="cvc_TLPCI">{{::'ease.card.payment.makeapayment.step2.debitCard.cvv.placeholder.label' | translate}}

                    <input id="cvc_TLPCI"
                           tabindex="0"
                           type="text"
                           debitcard-cvv="3"
                           ng-model="ccPay.paymentDetails.cvv"
                           name="cvc_TLPCI"
                           aria-describedby="hideScreenReaderLabelCvv"
                           required="required"
                           maxlength="3"
                           ng-minlength="3"
                           class="cvvValidation"
                           ng-focus="ccPay.editingCVV = true; ccPay.hasDebitError = false;"
                           ng-blur="ccPay.editingCVV = false"
                           ng-class="{'hasError' : ccPay.cvvErrorMsg === true}"
                           placeholder="{{::'ease.card.payment.makeapayment.step2.debitCard.cvv.placeholder.text' | translate}}">
                </label>

              </span>

        </div>
       <div id="validationMessages" aria-live="assertive" class="validationMessages">
            <p id="cvvErrorMsg" class="debitCardErrorMessage" ng-if="ccPay.shouldShowCVVError(ccPay.debitCardFields.cvc_TLPCI) || ccPay.shouldShowExpDateError(ccPay.debitCardFields.expDate)">
                {{'ease.card.payment.makeapayment.step1.debitCard.error.message' | translate}}</p>
       </div>
    </form>
</div>

<!--pay on -->
<div ng-if="ccPay.hasDebitCardSelected" aria-labelledby="Pay on date" class="cc-edit-container-label" id="step2PayOn" translate>ease.card.payment.makeapayment.step2.label.payon.text</div>
<div ng-if="ccPay.hasDebitCardSelected" class="cc-edit-container-last debitPayOn">
    <div class="cc-edit-container-content" id="step2Today">
            <span ng-if="ccPay.isToday(ccPay.paymentDetails.payOnDate)">
              {{'ease.card.payment.makeapayment.step2.today.text' | translate}} {{ccPay.formatDisplayDate(ccPay.paymentDetails.payOnDate, true, true)}}
            </span>

            <span ng-if="!ccPay.isToday(ccPay.paymentDetails.payOnDate)">
              {{ccPay.formatDisplayDate(ccPay.paymentDetails.payOnDate, true, true)}}
            </span>

    </div>
    <div ng-class="{'latePaymentColor': ccPay.showDueDateAsWarningColor()}" id="step2Due" class="cc-edit-container-description">
        {{'ease.card.payment.makeapayment.step2.due.text' | translate}} {{ccPay.paymentDueDate | date: 'MMMM dd': 'UTC'}}
    </div>
    <div id="cc-edit-payment-date-link" class="step2EditLink" ng-class="{'disabled':ccPay.loading}" ng-if="!(ccPay.paymentHelper.isAutoPay || ccPay.hasDebitCardSelected)" ng-click="!ccPay.showStep('step2b'); ccPay.psClick('link', 'editPayOn');" tabindex="0" aria-label="{{'ease.card.payment.makeapayment.step2.payon.edit.aria.label.text' | translate}} {{ccPay.formatDisplayDate(ccPay.paymentDetails.payOnDate, true, true)}}" translate>ease.card.payment.makeapayment.step2.edit.text</div>

    <div id="cc-more-info-payment-date-link" class="step2MoreInfoLink tooltip" ng-class="{'disabled':ccPay.loading}" ng-if="ccPay.paymentHelper.isAutoPay" title="{{'ease.card.payment.makeapayment.step2.payon.moreinfo.tooltip.text' | translate}}" tabindex="0" aria-label="{{'ease.card.payment.makeapayment.step2.payon.moreinfo.aria.label.text' | translate}}" translate>ease.card.payment.makeapayment.step2.moreinfo.text</div>
</div>

<!-- messaging at bottom for debit card -->
<div class="modal-footer" ng-if="ccPay.hasDebitCardSelected" >
    <p class="duplicatePayment" role="alert" id="debitError" ng-if="ccPay.hasDebitError">
        <i class="icon-caution"></i>
        <span translate>{{ccPay.specificErrorMessage}}</span>
    </p>
    <p aria-live="polite" class="debitCardProcessingInfo debitCardMessage" id="debitCardProcessingElement" ng-if="!ccPay.hasDebitError">
          <span class="debitCardProcessingInfoText">
            <i aria-label="Attention" class="debitCardProcessingInfoText-icon icon-exclamation"></i>
            <span class="debitCardProcessingInfoText-description" id="debitCardProcessingInfoText" translate>ease.card.payment.makeapayment.step2.debitCard.informational.message</span>
          </span>
    </p>
    <button class="success cc-pay-modal-button debitSubmit" tabindex="0" ng-click="ccPay.submitPayment();" data-ng-disabled="ccPay.debitCardFields.$invalid ||ccPay.hasDebitError === true" id="step2DebitSubmitButton">
        <div class="cc-spinner" ng-class="{'loading':ccPay.loading}">
            <span translate>{{ccPay.dynamicContentKeys.button}}</span>
        </div>
    </button>
</div>
