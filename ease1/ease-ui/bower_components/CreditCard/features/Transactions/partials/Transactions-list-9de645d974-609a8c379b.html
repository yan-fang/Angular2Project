<div ng-if="ccTransactions.configurableMenuItems" data-ng-include
     data-src="'/ease-ui/bower_components/CreditCard/features/ExtensibilityBar/partials/Transactions-extensibility-cacf4f1f4e-cacf4f1f4e.html'">
 </div>
 <div ng-if="!ccTransactions.configurableMenuItems" data-ng-include
     data-src="'/ease-ui/bower_components/CreditCard/features/Transactions/partials/Transactions-extensibility.html'"></div>
 </div>

<div class="container _credit-card transactions extensibility-transactions fadeInSlideUpSlow" data-ng-if="::on"
     ng-show="platformId !== 'cos-bridge'" role="table">

    <div>
        <ease-filter-bar data-ng-show="((!isShowLoadingEnable&&transactionsFilter) || isFilterInProgress)"
          categories = "ccTransactions.filterCategories"
          static-content = "ccTransactions.filterContentObj">
            <ease-search-bar search-text="ccTransactions.filterParams.searchText" search-function="ccTransactions.handleSearchFiltering(text)" static-content="ccTransactions.searchContentObj"></ease-search-bar>
        </ease-filter-bar>
    </div>
    <div class="load-spinner-section" data-ng-show="isShowLoadingEnable && !ccTransactions.shouldShowErrorFlap">
        <div class="cc-spinner-container">
            <div class="black_loading"></div>
        </div>
    </div>

    <ul id="dateFilteredTransactionsList" data-ng-if="(!isShowLoadingEnable&&(ccTransactions.isFilteringByDates()||ccTransactions.isFilteringByStatement()))"
        class="transactionsList" role="rowgroup">
        <li class="sortTransactions" role="row" >
            <p>
            <span id="dateFilteredTransactionsDateLabel" class="transactions-date" role="columnheader">
                  {{::ccTransactions.i18nTranslate.dateText}}</span>
                <span class="transactions-icon"></span>
            <span class="transactions-name">
              <span id="dateFilteredTransactionsMerchantLabel" class="transactions-description"
                    role="columnheader">{{::ccTransactions.i18nTranslate.merchantText}}</span>
              <span id="dateFilteredTransactionsCategoryLabel" class="transactions-category"
                    role="columnheader">{{::ccTransactions.i18nTranslate.categoryText}}</span>
            </span>
            <span class="transactions-amount-details">
              <span id="dateFilteredTransactionsCardIdLabel" class="transactions-card-id" role="columnheader">{{::ccTransactions.i18nTranslate.cardIdText}}</span>
              <span id="dateFilteredTransactionsAmountLabel" class="transactions-amount" role="columnheader">{{::ccTransactions.i18nTranslate.amountText}}</span>
            </span>
            </p>
        </li>
        <li ease-accordion data-ng-if="!ccTransactions.enableVirtualScroll" data-ng-class="{hideDisplay: (displayTransactions.length == 0 && ccTransactions.transactionsFilteredByDates.length == 0)}"
            template-override="/ease-ui/bower_components/CreditCard/features/Transactions/partials/transaction-templates/CreditCard-PostedTransactions-b41ab87c3b-b41ab87c3b.html"
            accordion-elements="ccTransactions.transactionsFilteredByDates" accordion-parent="ccTransactions"
            class="section"></li>
      <li ease-accordion  close-on-scroll=true data-ng-if="ccTransactions.enableVirtualScroll" data-ng-class="{hideDisplay: (displayTransactions.length == 0 && ccTransactions.transactionsFilteredByDates.length == 0)}"
            template-override="/ease-ui/bower_components/CreditCard/features/Transactions/partials/transaction-templates/CreditCard-PostedTransactions-vs-31989d1011-31989d1011.html"
            accordion-elements="ccTransactions.transactionsFilteredByDates" accordion-parent="ccTransactions"
            class="section"></li>

    </ul>
    <ul id="creditCardTransactionsList" ng-if="!isShowLoadingEnable&&!ccTransactions.isFilteringByDates()&&!ccTransactions.isFilteringByStatement()"
        class="transactionsList" role="rowgroup">

        <!-- ----------Scheduled Transactions------------- -->
         <li data-ng-if="ccTransactions.showScheduledSection()" class="section-header" aria-label={{::ccTransactions.i18nTranslate.scheduledPaymentText}} >
           <h2 class ="section_heading" tabindex="0"><span>{{::ccTransactions.i18nTranslate.scheduledPaymentText}}</span></h2>
          </li>
        <li data-ng-if="ccTransactions.showScheduledSection()" class="et-scheduled section" ease-accordion
            template-override="/ease-ui/bower_components/CreditCard/features/Transactions/partials/transaction-templates/CreditCard-ScheduledPayments-e593a0482b-231df4029c.html"
            accordion-elements="ccTransactions.filteredScheduledPayments" accordion-parent="ccTransactions"></li>

        <!-- ----------Column Headers------------- -->
        <li id="since-ls" class="section-header"  aria-label={{::ccTransactions.i18nTranslate.sinceLastStatementText}} >
            <span data-ng-show="ccTransactions.shouldFilterPayments">{{::ccTransactions.i18nTranslate.pastPaymentText}}</span>
            <h2 class ="section_heading" tabindex="0">
                <span data-ng-show="!ccTransactions.shouldFilterPayments">{{::ccTransactions.i18nTranslate.sinceLastStatementText}}</span>
            </h2>
            <a ng-click="::ccTransactions.handlePaymentActivityLinkEvent($event, 'viewPastPayments'); ccTransactions.togglePastPayments();"
            tabindex="0"
            id="paymentActivityLink"
            aria-label={{::ccTransactions.i18nTranslate.viewPastPaymentsAria}}> {{ccTransactions.i18nTranslate.viewPastPaymentsText}}</a>
        </li>
        <li class="sortTransactions" role="row">
            <p>
            <span id="transactionDateLabel" class="transactions-date" role="columnheader">
                  {{::ccTransactions.i18nTranslate.dateText}}</span>
                <span class="transactions-icon"></span>
            <span class="transactions-name">
              <span id="transactionMerchantLabel" class="transactions-description"
                    role="columnheader">{{::ccTransactions.i18nTranslate.merchantText}}</span>
              <span id="transactionCategoryLabel" class="transactions-category"
                    role="columnheader">{{::ccTransactions.i18nTranslate.categoryText}}</span>
            </span>
            <span class="transactions-amount-details">
              <span id="transactionCardIdLabel" class="transactions-card-id" role="columnheader">{{::ccTransactions.i18nTranslate.cardIdText}}</span>
              <span id="transactionAmountLabel" class="transactions-amount" role="columnheader">{{::ccTransactions.i18nTranslate.amountText}}</span>
            </span>
            </p>
        </li>

        <!-- ----------Pending Transactions------------- -->
        <li class="pending-transactions" data-ng-class="{hideDisplay: pendingTransactions.length == 0}"
            data-ng-show="ccTransactions.showRecentSection()">
            <ul>
                <li class="pending-transaction" data-ng-repeat="transaction in pendingTransactions |
                filter:{cardId: ccTransactions.selectedMenu} | filterTransactions:ccTransactions.filterParams.searchText:ccTransactions.searchProps |
                orderBy:'-displayDate'"

                        data-ng-show="!ccTransactions.shouldFilterPayments" id="pendingTransaction{{$index}}" role="row" tabindex="0" class ="pendingTransaction">
                    <p>
                        <span role="gridcell" class="transactions-date padding-date">{{::ccTransactions.i18nTranslate.pendingTransactionText}}</span>
                        <span role="gridcell" cc-icon class="transactions-icon" transaction="transaction"></span>
            <span class="transactions-name">
              <span role="gridcell" class="transactions-description">{{::transaction.merchant.name}}</span>
              <span role="gridcell" class="transactions-category">{{::transaction.merchant.type.description}}</span>
            </span>
            <span class="transactions-amount-details">
              <span role="gridcell" title="{{:: transaction.cardholderName.first}} {{:: transaction.cardholderName.last}} ...{{::transaction.cardId}}" class="transactions-card-id">{{::transaction.cardId | cardHolderNameAndLastFour : transaction.cardholderName.first : transaction.cardholderName.last }}</span>
              <span role="gridcell" class="transactions-amount">{{::transaction.amount.amountText}}</span>
            </span>
                    </p>
                </li>
            </ul>
        </li>
        <!-- ----------Posted Transactions(Recent) ------------- -->
        <li  data-ng-if="!ccTransactions.enableVirtualScroll && (!ccTransactions.isRecentTransEmpty()||ccTransactions.showRecentSection())" ease-accordion   data-ng-class="{hideDisplay: ccTransactions.shouldHideRecentTransactionGrid}"
            template-override="/ease-ui/bower_components/CreditCard/features/Transactions/partials/transaction-templates/CreditCard-PostedTransactions-b41ab87c3b-b41ab87c3b.html"
            accordion-elements="ccTransactions.filteredDisplayTransactions" accordion-parent="ccTransactions"
            class="section cc-posted-transactions-section" data-ng-show="ccTransactions.showRecentSection() && ccTransactions.hasPayment(ccTransactions.filteredDisplayTransactions)"></li>

      <li data-ng-if="ccTransactions.enableVirtualScroll && (!ccTransactions.isRecentTransEmpty()||ccTransactions.showRecentSection())" ease-accordion only-open-one=true close-on-scroll=true data-ng-class="{hideDisplay: ccTransactions.shouldHideRecentTransactionGrid}"
            template-override="/ease-ui/bower_components/CreditCard/features/Transactions/partials/transaction-templates/CreditCard-PostedTransactions-vs-31989d1011-31989d1011.html"
            accordion-elements="ccTransactions.filteredDisplayTransactions" accordion-parent="ccTransactions"
            class="section cc-posted-transactions-section" data-ng-show="ccTransactions.showRecentSection() && ccTransactions.hasPayment(ccTransactions.filteredDisplayTransactions)"></li>

        <li class="no-recent-trans" data-ng-if="ccTransactions.isRecentTransEmpty()||!ccTransactions.showRecentSection()"
            aria-label={{::ccTransactions.i18nTranslate.noRecentTransactionMessage}}>
          {{::ccTransactions.i18nTranslate.noRecentTransactionMessage}}
        </li>

        <!-- ----------Statements View ------------- -->
        <li class="satements-view section" ng-repeat="statementData in ccTransactions.filteredStatementsData"
            data-ng-show="ccTransactions.hasPayment(statementData)">
            <ul class="statement-section-view">
                <li class="section-header statement-header" id="stmt-{{$index}}-header" data-ng-show="!ccTransactions.shouldFilterPayments"
                    aria-label="{{::ccTransactions.i18nTranslate.statementEndText}}
                    {{statementData.statement.translatedDate}}">
                    <h2 class ="section_heading" tabindex= "0">
                      {{::ccTransactions.i18nTranslate.statementEndText}}  {{::statementData.statement.translatedDate}}</h2>
                    <a tabindex="0"
                        data-ng-if="ccTransactions.statementsLinkToggle && statementData.statement.statementReferenceId.length > 11 && statementData.statement.statementReferenceId.indexOf('STMT_IMAGE_NOT_FOUND')==-1"
                        ng-click="::ccTransactions.openStatement($event, statementData.statement)" href>
                        <i class="icon-circle-arrowdown"></i>
                        <span id="downloadStmt-{{$index}}">{{::ccTransactions.i18nTranslate.downloadStatementText}}</span>
                    </a>
                </li>
                <li ease-accordion data-ng-if="!ccTransactions.enableVirtualScroll" class="satements-view"
                    template-override="/ease-ui/bower_components/CreditCard/features/Transactions/partials/transaction-templates/CreditCard-statementView-01d174504a-01d174504a.html"
                    accordion-elements="statementData" accordion-parent="ccTransactions" data-ng-show="statementData.transactions.length >= 1 && ccTransactions.showStatementSection($index)"></li>
              <li ease-accordion data-ng-if="ccTransactions.enableVirtualScroll" class="satements-view" only-open-one=true close-on-scroll=true
                  template-override="/ease-ui/bower_components/CreditCard/features/Transactions/partials/transaction-templates/CreditCard-statementView-vs-b9da9d02af-b9da9d02af.html"
                  accordion-elements="statementData" accordion-parent="ccTransactions" data-ng-show="statementData.transactions.length >= 1 && ccTransactions.showStatementSection($index)"></li>

              <li tabindex="0" id="stmt-{{$index}}-no-transactions-msg" class="no-statement-trans"
                    data-ng-if="statementData.transactions.length < 1 || !ccTransactions.showStatementSection($index)">
                {{::ccTransactions.i18nTranslate.noStatementTransactionText}}

                </li>
            </ul>
        </li>

        <!-- ----------Load more and other divs ------------- -->
        <li class="load-more-btn" role="button"
            data-ng-hide="ccTransactions.shouldFilterPayments || ccTransactions.showTransactionsErrorFlap "
            ng-if="ccTransactions.stmtAvailable&&!ccTransactions.stmtLimitReached">
            <button tabindex="0" id='loadPrevStmtBtn' ng-click="::ccTransactions.loadPreviousStatement()"
                    aria-label={{::ccTransactions.i18nTranslate.loadPreviousStatementText}}
                    data-ng-disabled="ccTransactions.disableLoadMoreButton" class="load-more-transaction-btn">
                <div class="cc-spinner-container">
                    <div data-ng-class="ccTransactions.loadingData">
                        <span>{{::ccTransactions.i18nTranslate.loadPreviousStatementText}}</span>
                    </div>
                </div>
            </button>
        </li>
        <li ng-if="ccTransactions.stmtLimitReached" class="yellow-info notification"
            id="oneYearLimitReached" role="row"
            aria-label={{::ccTransactions.i18nTranslate.limitReachedText}}>
            <p class="statement-limit-reached">{{::ccTransactions.i18nTranslate.limitReachedText}}
            <a aria-label={{::ccTransactions.i18nTranslate.limitReached2Message}} ng-click="ccTransactions.showStatements()">
              {{::ccTransactions.i18nTranslate.limitReached2Message}}
              </a></p>
        </li>

        <li class="blue-info notification" ng-if="ccTransactions.endOfStatements"
            id="noMoreData" role="row"
            aria-label={{::ccTransactions.i18nTranslate.noMoreDataText}}>
            <p>{{::ccTransactions.i18nTranslate.noMoreDataText}}</p>
        </li>
        <li class="blue-info notification" id="noPurchaseOrPayment" role="row"
            ng-if="scheduled.length == 0 && displayTransactions.length == 0 && pendingTransactions.length == 0 && ccTransactions.filteredStatementsData.length == 0"
            aria-label={{::ccTransactions.i18nTranslate.noTransactionMessageText}}>
            <p>{{::ccTransactions.i18nTranslate.noTransactionMessageText}}</p>
        </li>
    </ul>

    <div class="noResults"
         ng-if="!isShowLoadingEnable&&(ccTransactions.isFilteringByDates()||ccTransactions.isFilteringByStatement())&&(ccTransactions.transactionsFilteredByDates.length == 0||!(ccTransactions.haveSearchResults()))"

         tabindex="0" aria-label={{::ccTransactions.i18nTranslate.noSearchResultText}}>
        <p>{{::ccTransactions.i18nTranslate.sorryMessageText}}</p>

        <p>{{::ccTransactions.i18nTranslate.noSearchResultText}}</p>
    </div>

</div>

<div class="container message-flap" data-ng-show="ccTransactions.shouldShowErrorFlap">
    <span class="message-flap-description">{{::ccTransactions.i18nTranslate.noTransactionsText}}</span>
</div>

<div class="container message-flap" data-ng-show="ccTransactions.showTransactionsErrorFlap">
    <span class="message-flap-description">{{::ccTransactions.i18nTranslate.failedTransactionsText}}</span>
</div>
<div ng-show="platformId !== 'cos-bridge'">
    <p class="disclaimer-message" id="disclaimer-text"
       aria-label={{::ccTransactions.i18nTranslate.disclaimerText}}>
      {{::ccTransactions.i18nTranslate.disclaimerText}}
    </p>
</div>
<div ui-view></div>
