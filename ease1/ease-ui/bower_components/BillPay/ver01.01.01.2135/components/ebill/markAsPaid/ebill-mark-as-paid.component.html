<ease-ui-modal
  close-modal="$ctrl.close()"
  modal-id="'modal-mark-as-paid'"
  modal-title="$ctrl.modalTitle"
  ng-class="$ctrl.modalClass">

    <p class="subheading" ng-if="$ctrl.step === 'confirm'">If you paid your bill another way or this eBill doesn't need to be paid, you can Mark Bill as Paid to clear this payment reminder.</p>

    <p class="subheading" ng-if="$ctrl.step === 'success'">The following bill will be marked as paid<span ng-if="$ctrl.billInfo.memo">, with the note <span class="bold">{{$ctrl.billInfo.memo}}</span></span></p>

    <info-list
       id="ebillInfo"
       info="$ctrl.ebillInfo"
       number-of-rows="{{$ctrl.ebillInfo.length}}"
       ng-if="$ctrl.ebillInfo.length > 0">
    </info-list>

    <form name="markAsPaid" id="markAsPaid" ng-if="$ctrl.step === 'confirm'">
      <a href="" ng-show="!$ctrl.showMemo" ng-click="$ctrl.showMemo = true; $ctrl.focusMemo()">Add reason for marking as paid</a>
      <div class="input-group" ng-show="$ctrl.showMemo">
        <label for="memo">Reason for marking as paid <span class="field-note">Optional</span></label>
        <div ng-class="(markAsPaid.memo.$touched && !markAsPaid.memo.$valid) ? 'error-border' :'' ">
          <input
            id="memo"
            name="memo"
            type="text"
            placeholder="80 Character Limit"
            ng-model="$ctrl.billInfo.memo"
            ng-maxlength="80"
            ng-pattern="$ctrl.alphaNumericRegex"
            aria-describedby="{{ !markAsPaid.memo.$valid ? 'error-memo' : '' }}" />
        </div>
      </div>

      <div class="error-summary" id="error-memo">
        <span
          id="error-memo-maxlength"
          ng-show="markAsPaid.memo.$error.maxlength">
          Reason should be less than 81 characters
        </span>
        <span
          id="error-memo-pattern"
          ng-show="!markAsPaid.memo.$error.maxlength && markAsPaid.memo.$error.pattern">
          Reason can only contain numbers and letters
        </span>
      </div>

      <submit-button
         ng-if="$ctrl.step === 'confirm'"
         id="mark-as-paid-submit"
         label="Mark as Paid"
         is-disabled="{{$ctrl.submitInProgress || markAsPaid.$invalid}}"
         is-loading="{{$ctrl.submitInProgress}}"
         submit-fn="$ctrl.submit()"
         bg-color=""
         >
      </submit-button>
    </form>
</ease-ui-modal>
