define(["angular","lodash"],function(e,n){function r(){return{restrict:"A",link:function(e,r){var t=new RegExp("[^-0-9a-zA-Z.@_"+e.accentedCharactersRegEx+"]","g"),i=[0,8,9,13,45,46,64,95,192,193,194,199,200,201,202,203,205,206,207,209,211,212,217,218,219,224,225,226,231,232,233,234,235,237,238,239,241,243,244,249,250,251],o=r.find("input");o.on("keypress",function(e){var r=e.which||e.charCode;return r>=48&&57>=r||r>=65&&90>=r||r>=97&&122>=r||n.contains(i,r)?!0:void e.preventDefault()}),o.on("input",function(){var e=o.val();t.test(e)&&o.val(e.replace(t,""))})}}}function t(){return{restrict:"A",link:function(n,r){function t(e,r,t){e&&(n.isValidEmail(e)?n.newEmailObj.email&&n.newEmailObj.emailAgain&&n.newEmailObj.email.toLowerCase()!==n.newEmailObj.emailAgain.toLowerCase()?(n.status[r]="error",n.emailValidateMessage[t]=n.content["ease.core.profileprefs.email.nomatch.error"]):(n.status.firstInputErrorStatus="",n.status.secondInputErrorStatus="",n.emailValidateMessage.firstInputErrorMessage="",n.emailValidateMessage.secondInputErrorMessage=""):(n.status[r]="error",n.emailValidateMessage[t]=n.content["ease.core.profileprefs.email.invalid.error"]))}var i=e.element(r.find("input")[0]),o=e.element(r.find("input")[1]);i.on("blur",function(){t(n.newEmailObj.email,"firstInputErrorStatus","firstInputErrorMessage")}),o.on("blur",function(){t(n.newEmailObj.emailAgain,"secondInputErrorStatus","secondInputErrorMessage")})}}}function i(){return{restrict:"A",link:function(e,n,r){n.on("keydown click",function(){e.status[r.resetErrorStatus]=""})}}}function o(e,n,r,t){return{restrict:"A",link:function(i,o,a){function s(){n.elementTriggeringModal=c}function l(e){var r=e.which||e.charCode;(13===r||32===r)&&(n.elementTriggeringModal=c)}var c="#"+a.id;o.on("click",s),o.on("keypress",l);var u=e.$on("returningToProfilePage",function(e,i){n.elementTriggeringModal&&n.elementTriggeringModal===c&&(i?t(function(){r[0].querySelector(c).focus()},100):o[0].focus())}),f=e.$on("deletingEmail",function(){n.elementTriggeringModal&&n.elementTriggeringModal===c&&t(function(){var e=c.substring(0,c.length-1)+(c.slice(-1)-1);r[0].querySelector(e).focus()},100)});i.$on("$destroy",function(){u(),f(),o.off("click",s),o.off("keypress",l)})}}}return r.$inject=[],t.$inject=[],i.$inject=[],o.$inject=["$rootScope","profileInfoFactory","$document","$timeout"],e.module("personalInformationModule").directive("disableSpecialCharacters",r).directive("validateEmailInputs",t).directive("resetErrorStatus",i).directive("focusOnProfileModalClose",o)});