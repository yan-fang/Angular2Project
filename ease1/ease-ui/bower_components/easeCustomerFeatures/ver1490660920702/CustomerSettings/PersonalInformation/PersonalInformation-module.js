define(["angular"],function(e){function t(e){this.registerState=function(t,o,a,n){var r={name:t,url:o||"",resolve:{showModalAddress:["featureToggleData","EaseConstant","profileInfoFactory","$q","$timeout","$state","personalInfoDependencies",function(e,t,o,a,n,r){var s=a.defer();return e[t.features.enableShowAddress]&&e[t.features.enableEditCardAddress]?s.resolve(!0):(o.openFeatureUnavailable(),n(function(){r.go("accountSummary")},1e3)),s.promise}],loadDependencies:["$ocLazyLoad","$log",function(e,t){return e.load({serie:!0,files:a}).then(function(){t.info("dependencies successfully loaded....")})}],loadModal:["$log","loadDependencies",n,"easeHttpInterceptor","showModalAddress",function(e,t,o,a){a.setBroadCastEventOnce("errHandler");try{o.loadChangeAddress()}catch(n){e.info(n),a.resetBroadCastEvent()}}]},onExit:["easeHttpInterceptor",function(e){e.resetBroadCastEvent()}]};e.state(r)},this.$get=function(){return{}}}function o(e,t,o,a,n){var r={name:"customerSettings.profile",url:"/Profile",resolve:{featureToggleData:["featureToggleFactory",function(e){return e.initializeFeatureToggleData()}],featureToggleDataCIC:["featureToggleFactory","featureToggleData",function(e){return e.initializeFeatureToggleData(t.features.showCICLinkFeature)}],personalInfoDependencies:["$ocLazyLoad","$injector","$log",function(e,t,o){return e.load({serie:!0,files:[a.get("services",["CustomerSettings","PersonalInformation"]),a.get("controller",["CustomerSettings","PersonalInformation"]),a.get("directives",["CustomerSettings","PersonalInformation"])]}).then(function(){return{profileInfoFactory:t.get("profileInfoFactory")}},function(e){o.info("Failed to load personalInfoDependencies: "+e)})}],setFactoryData:["personalInfoDependencies","errorContentData",function(e,t){return e.profileInfoFactory.setErrorContentData(t),e.profileInfoFactory}],emailData:["setFactoryData","featureToggleData",function(e,o){return o[t.features.enableShowEmail]?e.getEmailList():[]}],accountsData:["EASEUtilsFactory","summaryService","$q","setFactoryData",function(e,t,o,a){var n=e.getSummaryData().accounts;if(n)return a.setSmallBusinessAccounts(n),a.checkForPersonalAccounts(n),!0;var r=o.defer();return t.set().then(function(){n=e.getSummaryData().accounts,a.setSmallBusinessAccounts(n),a.checkForPersonalAccounts(n),r.resolve(!0)}),r.promise}],phoneNumberData:["featureToggleData","setFactoryData","accountsData",function(e,o,a){return a&&e[t.features.enableShowPhone]&&o.hasPersonalAccounts?o.getPhoneNumberList("50076"):[]}],smallBusinessPhoneData:["featureToggleData","setFactoryData","accountsData",function(e,o,a){var n=o.getSmallBusinessAccounts();return a&&e[t.features.enableShowSmallBusinessPhone]&&n&&n.length>0?o.getSmallBusinessPhoneNumberList("50076"):[]}],data:["contentDataProfilePref","EASEUtilsFactory","phoneNumberData",function(e,o){o.setCustomerTitleData(e.core_profileprefs_en_US[t.customerSettings.kPersonalInfo])}]},controller:"PersonalInformationController",controllerAs:"PersonalInfoCtrl",templateUrl:o.get("PersonalInformation"),title:"Profile"},s={name:"customerSettings.profile.addEmail",url:"/AddEmail",parent:r,resolve:{featureToggleData:["featureToggleFactory",function(e){return e.initializeFeatureToggleData()}],contentData:["contentOneFactory","ContentConstant","$q",function(e,t,o){var a=o.defer();return e.initializeContentOneData(t.kProfileprefs).then(function(e){a.resolve(e)}),a.promise}],emailListData:["personalInfoDependencies","featureToggleData",function(e,o){return o[t.features.enableShowEmail]?e.profileInfoFactory.getEmailList():[]}],urlChecking:["featureToggleData","$rootScope","$location","$q","errorContentData","ContentConstant","emailListData",function(e,o,a,n,r,s,i){var l=e[t.features.enableShowEmail]&&e[t.features.enableAddEmail]&&i.length<10,u={},c=n.defer();return l?c.resolve(!0):(u.msgHeader=r[s.kCommonSnag+"en_US"]["core.common.snag.modal.header"],u.msgBody=r[s.kCommonSnag+"en_US"]["core.common.snag.modal.featureoff.label"],o.$broadcast("error",u),a.path("/Profile"),c.reject(!1)),c.promise}]},controller:"AddEmailModalController",title:"Add Email"},i={name:"customerSettings.profile.editEmail",url:"/EditEmail",parent:r,resolve:{urlChecking:["$location",function(e){e.path("/Profile")}]}},l={name:"customerSettings.profile.editMobilePhone",url:"/MobilePhone",parent:r,title:"Edit Mobile Phone",onEnter:["setFactoryData","featureToggleData","$state",function(e,o,a){if(e.hasPersonalAccounts)if(o[t.features.enableEditPhone]&&o[t.features.enableShowPhone]){var n=e.getParsedPersonalPhoneNumbers(),r=e.buildPhoneModalObj(n.mobile);e.openEditPhoneNumberModal(r)}else e.openFeatureUnavailable(),a.go("customerSettings.profile");else a.go("customerSettings.profile")}]},u={name:"customerSettings.profile.editHomePhone",url:"/HomePhone",parent:r,title:"Edit Home Phone",onEnter:["setFactoryData","featureToggleData","$state",function(e,o,a){if(e.hasPersonalAccounts)if(o[t.features.enableEditPhone]&&o[t.features.enableShowPhone]){var n=e.getParsedPersonalPhoneNumbers(),r=e.buildPhoneModalObj(n.home);e.openEditPhoneNumberModal(r)}else e.openFeatureUnavailable(),a.go("customerSettings.profile");else a.go("customerSettings.profile")}]},c={name:"customerSettings.profile.editWorkPhone",url:"/WorkPhone",parent:r,title:"Edit Work Phone",onEnter:["setFactoryData","featureToggleData","$state",function(e,o,a){if(e.hasPersonalAccounts)if(o[t.features.enableEditPhone]&&o[t.features.enableShowPhone]){var n=e.getParsedPersonalPhoneNumbers(),r=e.buildPhoneModalObj(n.work);e.openEditPhoneNumberModal(r)}else e.openFeatureUnavailable(),a.go("customerSettings.profile");else a.go("customerSettings.profile")}]};e.state(r).state(s).state(i).state(l).state(u).state(c);var f=["js!StatementModule","js!CreditCard"];n.registerState("customerSettings.profile.changeAddress","/ChangeAddress",f,"CC")}return t.$inject=["$stateProvider"],o.$inject=["$stateProvider","EaseConstant","easeCoreTemplatesProvider","easeCoreFilesProvider","CoreChangeAddressStateProvider"],e.module("personalInformationModule",["EaseProperties","easeAppUtils","coreUtils","restangular","PhysicalAddressLink","ui.router","oc.lazyLoad","EaseExceptionsModule"]).config(o).provider("CoreChangeAddressState",t)});