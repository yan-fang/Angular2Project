<div data-ng-controller="AutoLoanPaymentPlanController as alPlan">
  <div class="messageBlock">
    <div class="error" data-ng-if="alPlan.errorMessage" aria-live="assertive">
      <i class="icon-warning"></i>

      <div class="message" aria-label="{{alPlan.errorMessage}}"><span id="paymentplan.message"> {{alPlan.errorMessage}}</span>
      </div>
    </div>
  </div>

  <form class="paymentPlan" id="frmPymtPlan">

    <div class="form-container">
      <ease-dropdown id="payFrom" no-place-holder="alPlan.placeHolderFrom" label-txt="i18n.coaf.payment.paymentModal.payFrom.label.v1"
                     bind-data="alPlan.from" widget-id="'accountDd'" type="'accountDd'" localize="i18n" label-id="'PaymentAccount'"
                     service="alPlan.paymentAccountService" focus='true'></ease-dropdown>
      <span aria-hidden="true" data-ng-if="!alPlan.from" data-ng-click="alPay.clickOnElement('accountDd')" class="dropdown-placeholder" data-ng-bind="i18n.coaf.payment.paymentModal.accountWatermark.label.v1"></span>
    </div>


    <div class="form-container">
      <label id="payFrequencyAndAmount" for="frequencyType" class="frequencyText"
             data-ng-bind="i18n.coaf.payment.paymentModal.payAmount.label.v1"></label>

      <div dropdown widget-id="'frequencyType'" aria-labelledby="payFrequencyAndAmount"
           datasource-function="alPlan.populateFrequencyTypes()"
           placeholder="{{i18n.coaf.payment.paymentModal.paymentFrequencyPlaceHolder.label.v1}}"
           display-field="displayText"
           data-ng-model="alPlan.frequencyType"
           on-select-function="alPlan.frequencyTypeChanged(item)"></div>
    </div>


    <div ng-show="alPlan.showmonthly" class="form-container">
      <label id="paymentDayMonthly" for="paymentDay" class="frequencyText"
             data-ng-bind="i18n.coaf.payment.paymentModal.paymentDay.label.v1"></label>

      <div id="dueDateMonthly" class="dueDate"
           data-ng-bind="i18n.coaf.payment.paymentModal.due.label.v1 + ' ' + (accountDetailsData.accountDetails.dueDate | date:'MMM d')"
           aria-label="{{i18n.coaf.payment.paymentModal.due.label.v1 + ' ' + (accountDetailsData.accountDetails.dueDate | date:'longDate')}}">
      </div>
      <div dropdown widget-id="'paymentDay'" aria-labelledby="paymentDayMonthly"
           datasource-function="alPlan.populateMonthlyFrequencyValues()"
           placeholder="{{i18n.coaf.payment.paymentModal.paymentDayPlaceHolder.label.v1}}"
           display-field="display"
           data-ng-model="alPlan.frequencyValue1"
           on-select-function="alPlan.paymentDay1Changed(item)"></div>
    </div>


    <div ng-show="alPlan.showtwiceamonth" class="form-container">
      <label id="paymentDayTwiceAMonth1" for="paymentDay1" class="frequencyText"
             data-ng-bind="i18n.coaf.payment.paymentModal.firstPayment.label.v1"></label>

      <div id="dueDateTwiceAMonth" class="dueDate"
           data-ng-bind="i18n.coaf.payment.paymentModal.due.label.v1 + ' ' + (accountDetailsData.accountDetails.dueDate | date:'MMM d')"
           aria-label="{{i18n.coaf.payment.paymentModal.due.label.v1 + ' ' + (accountDetailsData.accountDetails.dueDate | date:'longDate')}}">
      </div>
      <div dropdown widget-id="'paymentDay1'" aria-labelledby="paymentDayTwiceAMonth1"
           datasource-function="alPlan.populateMonthlyFrequencyValues()"
           placeholder="{{i18n.coaf.payment.paymentModal.paymentDayPlaceHolder.label.v1}}"
           display-field="display"
           data-ng-model="alPlan.frequencyValue1"
           on-select-function="alPlan.paymentDay1Changed(item)"></div>
    </div>

    <div ng-show="alPlan.showtwiceamonth" class="form-container">
      <label id="paymentDayTwiceAMonth2" for="paymentDay2" class="frequencyText"
             data-ng-bind="i18n.coaf.payment.paymentModal.secondPayment.label.v1"></label>

      <div dropdown widget-id="'paymentDay2'" aria-labelledby="paymentDayTwiceAMonth2"
           datasource-function="alPlan.populateMonthlyFrequency2Values()"
           placeholder="{{i18n.coaf.payment.paymentModal.paymentDayPlaceHolder.label.v1}}"
           display-field="display"
           data-ng-model="alPlan.frequencyValue2"
           on-select-function="alPlan.paymentDay2Changed(item)"></div>
    </div>


    <div class="form-container" ng-show="alPlan.showweekly">
      <label id="paymentDateLabel" for="paymentDate" class="frequencyText"
             data-ng-bind="i18n.coaf.payment.paymentModal.paymentDay.label.v1"></label>

      <div id="dueDateWeekly" class="dueDate"
           data-ng-bind="i18n.coaf.payment.paymentModal.due.label.v1 + ' ' + (accountDetailsData.accountDetails.dueDate | date:'MMM d')"
           aria-label="{{i18n.coaf.payment.paymentModal.due.label.v1 + ' ' + (accountDetailsData.accountDetails.dueDate | date:'longDate')}}">
      </div>
      <div id="autoLoanEaseDatePicker" class="easeDatePicker">
        <input
          id="paymentDate"
          class = "date-input calendar"
          placeholder="Choose Date"
          type="text" ease-calendar-popup
          ng-model="alPlan.date"
          is-open = "alPlan.opened"
          calendar-options = "alPlan.calendarInlineOptions"
          ng-click= "alPlan.open($event)"
          ng-keypress="alPlan.openByKeyPress($event)"
          readonly="true"
          />
        <span>
          <i aria-label="{{alPlan.i18n.coaf.payment.paymentModal.showCalender.label.v1}}" class="icon-calendar dateControlButton"
             id="autoLoanPaymentCalendar" data-ng-click="alPlan.open($event)"></i>
        </span>
      </div>
    </div>


    <span ng-if="alPlan.hasAdditionalPrincipalVerbiage">
      <div id="additionalPrincipalLink" class="additionalPrincipalVerbiage" role="link" ng-click="alPlan.showAdditionalPrincipalPaymentInput()">
        + {{::i18n.coaf.payment.paymentModal.addtnlPrincipalPmt.label.v1}}
      </div>
    </span>

    <div class="form-container"
         ng-if="alPlan.hasAdditionalPrincipal">
      <label for="additionalPrincipalAmount"
             data-ng-bind="::i18n.coaf.payment.paymentModal.addtnlPrincipalPmt.label.v1">
      </label>
      <span id="additionalPrincipal">
        <div class="dollarAmount" aria-live="polite" aria-atomic="true">
          <input id="additionalPrincipalAmount" class="animated" aria-hidden="false"
                 ng-trim="false"
                 ng-class="{shake: alPlan.isDisplayError()}"
                 ng-keydown="alPlan.checkAdditionalPrincipalAmount()"
                 ng-keyup="alPlan.checkAdditionalPrincipalAmount()"
                 placeholder="0.00"
                 data-ng-model="alPlan.additionalPrincipal"
                 type="text" focus-if="alPlan.hasAdditionalPrincipal">
          <span aria-hidden="true" class='symbol' id="currencySymbol"
                data-ng-bind="i18n.coaf.payment.paymentModal.amountSymbol.label.v1"></span>
          <span id="baseAmount"
                data-ng-bind="('+ ') + (i18n.coaf.payment.paymentModal.amountSymbol.label.v1) + (alPlan.amount | number:2)"></span>
          <div id="amountError" class="amtExceed" role="alert"
               data-ng-show="alPlan.isDisplayError()"
               data-ng-bind="alPlan.amountErrorMessage"></div>
        </div>
      </span>
    </div>


    <div class="totalPayment" ng-show="alPlan.totalPayment>0"
         aria-label="{{i18n.coaf.payment.paymentModal.totalPayment.label.v1}} {{alPlan.totalPayment | currency}}">
      <label for="totalPayment" data-ng-bind="i18n.coaf.payment.paymentModal.totalPayment.label.v1"></label>
      <span id="totalPayment">{{alPlan.totalPayment | currency}}</span>
    </div>


    <button id="scheduleRecurring" tabindex="0" data-ng-click="alPlan.createPaymentPlan(event)"
            aria-pressed="{{alPlan.ariaSchedulePlanPressed}}"
            class="button" ng-disabled="alPlan.isFormInvalid()">
      <div data-ng-class="{'loading':alPlan.spinning}">
        <span data-ng-bind="i18n.coaf.payment.paymentModal.scheduleRecurring.button.v1"></span>
      </div>
    </button>

    <p class="ccDisclaimer" data-ng-bind="i18n.coaf.payment.paymentModal.paymentPlanDisclaimer1.label.v1"
       aria-label="{{i18n.coaf.payment.paymentModal.paymentPlanDisclaimer1.label.v1}}"></p>

    <p class="ccDisclaimer" data-ng-bind="i18n.coaf.payment.paymentModal.paymentPlanDisclaimer2.label.v1"
       aria-label="{{i18n.coaf.payment.paymentModal.paymentPlanDisclaimer2.label.v1}}"></p>
  </form>
</div>
