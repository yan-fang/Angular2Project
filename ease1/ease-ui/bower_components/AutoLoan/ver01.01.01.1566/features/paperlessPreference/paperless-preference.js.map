{"version":3,"sources":["paperless-preference.controller.js","paperless-preference.component.js","paperless-preference.service.js","paperless-preference.js","../../../../../../../../../../module-insertRequire.js"],"names":["define","PaperlessPreferenceController","$state","autoLoanModuleService","paperlessPreferenceService","autoLoanPubsubService","trackPageView","level2","level3","vm","this","i18n","getI18n","coaf","paperlessModal","accountReferenceId","getAccountDetailsData","accountDetails","getPaperlessPreference","then","data","errorMessage","notificationMessage","text","paperlessPref","label","v1","close","go","submit","putPaperlessPreference","isEnrolled","$inject","PaperlessPreferenceComponentController","$sce","isDisabled","updatePreference","trustHtml","htmlCode","id","replace","trustAsHtml","paperlessPreference","restrict","scope","model","onSubmit","onCancel","bindToController","controller","controllerAs","templateUrl","PATH_TO_HTML","getPaperlessPreferenceUrl","encodeURIComponent","PaperlessPreferenceService","$q","Restangular","EASEUtilsFactory","EaseConstantFactory","getHeaders","businessEventId","BUS_EVT_ID","EVT_SYNCH_TOKEN","getSyncId","url","deferred","defer","headers","BUS_EVT_GET","setBaseUrl","baseUrl","all","get","resolve","ex","reject","promise","BUS_EVT_PUT","post","angular","PaperlessPreferenceComponent","module","service","directive","require"],"mappings":"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","file":"paperless-preference.js","sourcesContent":["define('PaperlessPreferenceController',['angular'\n  ],\n  function() {\n    'use strict';\n    PaperlessPreferenceController.$inject =\n      ['$state', 'autoLoanModuleService', 'paperlessPreferenceService', 'AutoLoanPubsubService'];\n    function PaperlessPreferenceController($state,\n                                           autoLoanModuleService, paperlessPreferenceService, autoLoanPubsubService) {\n      autoLoanPubsubService.trackPageView({\n        level2: 'account Details',\n        level3: 'paperless'\n      });\n\n      var vm = this;\n      vm.i18n = autoLoanModuleService.getI18n().coaf.paperlessModal;\n\n      var accountReferenceId = autoLoanModuleService.getAccountDetailsData().accountDetails.accountReferenceId;\n\n      paperlessPreferenceService.getPaperlessPreference(accountReferenceId).then(\n        function(data) {\n          vm.errorMessage = '';\n          if (data.notificationMessage) {\n            vm.errorMessage = data.notificationMessage.text;\n          } else {\n            vm.paperlessPref = data;\n          }\n        },\n        function() {\n          vm.errorMessage = vm.i18n.errorMessage.label.v1;\n        }\n      );\n\n      vm.close = function() {\n        autoLoanPubsubService.trackPageView({\n          level2: 'account Details'\n        });\n        $state.go('^');\n\n      };\n\n      vm.submit = function() {\n        paperlessPreferenceService.putPaperlessPreference(accountReferenceId, vm.paperlessPref.isEnrolled)\n          .then(\n            function(data) {\n              vm.errorMessage = '';\n              if (data && data.notificationMessage) {\n                vm.errorMessage = data.notificationMessage.text;\n              } else {\n                $state.go('^');\n              }\n            },\n            function() {\n              vm.errorMessage = vm.i18n.errorMessage.label.v1;\n            }\n          );\n      };\n\n    }\n\n    return PaperlessPreferenceController;\n  });\n\n","define('PaperlessPreferenceComponent',[], function() {\n\n  var PATH_TO_HTML = '/ease-ui/bower_components/AutoLoan/ver01.01.01.1566/features/paperlessPreference/partials/' +\n    'paperless-preference.component.html';\n\n  PaperlessPreferenceComponentController.$inject = ['$sce'];\n  function PaperlessPreferenceComponentController($sce) {\n    var vm = this;\n    vm.isDisabled = true;\n    vm.updatePreference = function() {\n      vm.isDisabled = !vm.isDisabled;\n    };\n\n    vm.isDisabled = function() {\n      return vm.isDisabled;\n    };\n    vm.trustHtml = function(htmlCode, id) {\n      htmlCode = htmlCode.replace('{0}', id);\n      return $sce.trustAsHtml(htmlCode);\n    };\n\n  }\n\n  function paperlessPreference() {\n    return {\n\n      restrict: 'E',\n      scope: {\n        id: '@',\n        model: '=',\n        i18n: '=',\n        onSubmit: '&',\n        onCancel: '&',\n        errorMessage: '='\n      },\n\n      bindToController: true,\n      controller: PaperlessPreferenceComponentController,\n      controllerAs: 'ctrl',\n      templateUrl: PATH_TO_HTML\n    };\n  }\n\n  return paperlessPreference;\n});\n\n\n","define('PaperlessPreferenceService',['angular'],\n  function() {\n    'use strict';\n\n\n    PaperlessPreferenceService.$inject = ['$q', 'Restangular', 'EASEUtilsFactory', 'EaseConstantFactory'];\n\n    var BUS_EVT_GET = '50118';\n    var BUS_EVT_PUT = '50119';\n\n    function getPaperlessPreferenceUrl(accountReferenceId) {\n      return 'AutoLoan/preferences/paperless/' + encodeURIComponent(accountReferenceId);\n    }\n\n    function PaperlessPreferenceService($q, Restangular, EASEUtilsFactory, EaseConstantFactory) {\n\n      function getHeaders(businessEventId) {\n        return {\n          'BUS_EVT_ID': businessEventId, EVT_SYNCH_TOKEN: EASEUtilsFactory.getSyncId()\n        }\n      }\n\n      this.getPaperlessPreference = function(accountReferenceId) {\n        var url = getPaperlessPreferenceUrl(accountReferenceId);\n        var deferred = $q.defer();\n        var headers = getHeaders(BUS_EVT_GET);\n\n        Restangular.setBaseUrl(EaseConstantFactory.baseUrl());\n        Restangular.all(url).get('', {}, headers).then(\n          function(data) {\n            deferred.resolve(data);\n          },\n          function(ex) {\n            deferred.reject(ex);\n          })\n        ;\n        return deferred.promise;\n      };\n\n      this.putPaperlessPreference = function(accountReferenceId, isEnrolled) {\n        var url = getPaperlessPreferenceUrl(accountReferenceId) + (isEnrolled ? '/set' : '/unset');\n\n        var deferred = $q.defer();\n        var headers = getHeaders(BUS_EVT_PUT);\n\n        Restangular.setBaseUrl(EaseConstantFactory.baseUrl());\n        Restangular.all(url).post('', {}, headers).then(\n          function(data) {\n            deferred.resolve(data);\n          },\n          function(ex) {\n            deferred.reject(ex);\n          });\n        return deferred.promise;\n      };\n    }\n\n    return PaperlessPreferenceService;\n  });\n\n","define('PaperlessPreference',['angular',\n    'PaperlessPreferenceController',\n    'PaperlessPreferenceComponent',\n    'PaperlessPreferenceService'\n  ],\n  function(angular, PaperlessPreferenceController, PaperlessPreferenceComponent, PaperlessPreferenceService) {\n    'use strict';\n\n    return angular.module('PaperlessModule', ['easeUIComponents'])\n      .controller('paperlessPreferenceController', PaperlessPreferenceController)\n      .service('paperlessPreferenceService', PaperlessPreferenceService)\n      .directive('paperlessPreference', PaperlessPreferenceComponent)\n  });\n\n","\nrequire([\"PaperlessPreference\"]);\n"]}